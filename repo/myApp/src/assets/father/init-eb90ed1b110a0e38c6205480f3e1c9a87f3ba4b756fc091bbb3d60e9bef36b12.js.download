var Loop = new Class({
loopCount:0,
isLooping:!1,
loopMethod:function() {},
setLoop:function(t, e) {
return wasLooping = this.isLooping, wasLooping && this.stopLoop(), this.loopMethod = t, 
this.loopDelay = e || 3e3, wasLooping && this.startLoop(), this;
},
stopLoop:function() {
return this.isLooping = !1, clearInterval(this.periodical), this;
},
startLoop:function(t, e) {
return this.isLooping || (this.isLooping = !0, e && this.looper(), this.periodical = this.looper.periodical(t || this.loopDelay, this)), 
this;
},
resetLoop:function() {
return this.loopCount = 0, this;
},
looper:function() {
return this.loopCount++, this.loopMethod(this.loopCount), this;
}
});

!function() {
var t = this.SlideShow = new Class({
Implements:[ Options, Events, Loop ],
options:{
delay:7e3,
transition:"crossFade",
duration:500,
autoplay:!1,
dataAttribute:"data-slideshow",
selector:"> *",
initialSlideIndex:0
},
transitioning:!1,
reversed:!1,
initialize:function(t, e, i) {
this.element = document.id(t), this.setOptions(e), i || this.setup();
},
setup:function(t) {
return t && this.setOptions(t), this.slides = this.element.getElements(this.options.selector), 
this.setupElement().setupSlides(), this.current = this.current || this.slides[this.options.initialSlideIndex], 
this.index = this.current.retrieve("slideshow-index"), this.setLoop(this.show.pass(this.reversed ? "previous" :"next", this), this.options.delay), 
this.options.autoplay && this.play(), this;
},
show:function(e, i) {
if ("next" != e && "previous" != e || (e = this[e + "Slide"]()), "number" == typeof e && (e = this.slides[e]), 
e == this.current || this.transitioning) return this;
this.transitioning = !0, this.current.store("slideshow:oldStyles", this.current.get("style"));
var n = i && i.transition ? i.transition :e.retrieve("slideshow-transition"), s = i && i.duration ? i.duration :e.retrieve("slideshow-duration"), o = this.current.setStyle("z-index", 1), r = this.reset(e).setStyle("z-index", 0), a = this.index = r.retrieve("slideshow-index");
return slideData = {
previous:{
element:o,
index:o.retrieve("slideshow-index")
},
next:{
element:r,
index:a
}
}, this.fireEvent("show", slideData), t.transitions[n]({
previous:o,
next:r,
duration:s,
instance:this
}), function() {
o.setStyle("display", "none"), this.fireEvent("showComplete", slideData), this.transitioning = !1;
}.bind(this).delay(s), this.current = r, this;
},
play:function() {
return this.startLoop(), this.fireEvent("play"), this;
},
pause:function() {
return this.stopLoop(), this.fireEvent("pause"), this;
},
reverse:function() {
return this.setLoop(this.show.pass(this.reversed ? "next" :"previous", this), this.options.delay), 
this.reversed = !this.reversed, this.fireEvent("reverse"), this;
},
setupElement:function() {
return this.storeData(this.element), this.options.duration = this.element.retrieve("slideshow-duration"), 
this.options.transition = this.element.retrieve("slideshow-transition"), this.options.delay = this.element.retrieve("slideshow-delay"), 
"static" == this.element.getStyle("position") && this.element.setStyle("position", "relative"), 
this;
},
setupSlides:function() {
return this.slides.each(function(t, e) {
t.store("slideshow-index", e).store("slideshow:oldStyles", t.get("style")), this.storeData(t), 
t.setStyle("display", this.current || e == this.options.initialSlideIndex ? "" :"none");
}, this), this;
},
storeData:function(t) {
var e = this.options;
t.store("slideshow-transition", e.transition), t.store("slideshow-duration", e.duration), 
t == this.element && t.store("slideshow-delay", e.delay);
var i = t.get(this.options.dataAttribute);
return i ? (Slick.parse(i).expressions[0].each(function(e) {
t.store("slideshow-" + e.tag, e.pseudos[0].key);
}), this) :this;
},
reset:function(t) {
return t.set("style", t.retrieve("slideshow:oldStyles"));
},
nextSlide:function() {
return this.slides[this.index + 1] || this.slides[0];
},
previousSlide:function() {
return this.slides[this.index - 1] || this.slides.getLast();
},
toElement:function() {
return this.element;
}
});
t.transitions = {}, t.defineTransition = function(e, i) {
t.transitions[e] = i;
}, t.defineTransitions = function(e) {
Object.each(e, function(e, i) {
t.defineTransition(i, e);
});
};
}(), Element.Properties.slideshow = {
set:function(t) {
return this.get("slideshow").setup(t), this;
},
get:function() {
var t = this.retrieve("slideshow");
return t || (t = new SlideShow(this, {}, !0), this.store("slideshow", t)), t;
}
}, Element.implement({
playSlideShow:function(t) {
return this.get("slideshow").setup(t).play(), this;
},
pauseSlideShow:function() {
return this.get("slideshow").pause(), this;
}
}), SlideShow.defineTransitions({
none:function(t) {
return t.previous.setStyle("display", "none"), this;
},
fade:function(t) {
return t.previous.set("tween", {
duration:t.duration
}).fade("out"), this;
},
crossFade:function(t) {
return t.previous.set("tween", {
duration:t.duration
}).fade("out"), t.next.set("tween", {
duration:t.duration
}).fade("in"), this;
},
fadeThroughBackground:function(t) {
var e = t.duration / 2;
return t.next.set("tween", {
duration:e
}).fade("hide"), t.previous.set("tween", {
duration:e,
onComplete:function() {
t.next.fade("in");
}
}).fade("out"), this;
}
}), function() {
function t(t) {
return {
property:"left" == t || "right" == t ? "left" :"top",
inverted:"left" == t || "up" == t ? 1 :-1
};
}
function e(t, e, i) {
var n = {
duration:i.duration,
unit:"%"
};
"blind" == t && i.next.setStyle("z-index", 2), "slide" != t && (i.next.set("tween", n).setStyle(e.property, 100 * e.inverted + "%"), 
i.next.tween(e.property, 0)), "blind" != t && i.previous.set("tween", n).tween(e.property, -(100 * e.inverted));
}
[ "left", "right", "up", "down" ].each(function(i) {
var n = i.capitalize(), s = "blind" + n, o = "slide" + n;
[ [ "push" + n, function() {
var n = t(i);
return function(t) {
e("push", n, t);
};
}() ], [ s, function() {
var n = t(i);
return function(t) {
e("blind", n, t);
};
}() ], [ o, function() {
var n = t(i);
return function(t) {
e("slide", n, t);
};
}() ], [ s + "Fade", function(t) {
return this.fade(t)[s](t), this;
} ] ].each(function(t) {
SlideShow.defineTransition(t[0], t[1]);
});
});
}(), function() {
function t(t) {
return {
property:"left" == t || "right" == t ? "x" :"y",
inverted:"left" == t || "up" == t ? 1 :-1
};
}
function e(t, e, i) {
var n = {
duration:i.duration + "ms",
"timing-function":"ease",
property:"transform"
};
"blind" == t && i.next.setStyle("z-index", 2), "slide" != t && i.next.translate(e.property, 100 * e.inverted), 
setTimeout(function() {
"slide" != t && i.next.setTransition(n).translate(e.property, 0), "blind" != t && i.previous.setTransition(n).translate(e.property, -(100 * e.inverted));
}, 0);
}
[ "left", "right", "up", "down" ].each(function(i) {
var n = i.capitalize(), s = "blind" + n + "CSS", o = "slide" + n + "CSS";
[ [ "push" + n + "CSS", function() {
var n = t(i);
return function(t) {
e("push", n, t);
};
}() ], [ s, function() {
var n = t(i);
return function(t) {
e("blind", n, t);
};
}() ], [ o, function() {
var n = t(i);
return function(t) {
e("slide", n, t);
};
}() ] ].each(function(t) {
SlideShow.defineTransition(t[0], t[1]);
});
});
}(), SlideShow.useCSS = function() {
return [ "left", "right", "up", "down" ].each(function(t) {
var e = t.capitalize(), i = "blind" + e, n = "slide" + e;
SlideShow.transitions[i] = SlideShow.transitions[i + "CSS"], SlideShow.transitions[n] = SlideShow.transitions[i + "CSS"], 
SlideShow.transitions["push" + e] = SlideShow.transitions["push" + e + "CSS"];
}), this;
};

var ImageGallery = new Class({
Implements:[ Events, Options ],
options:{},
initialize:function(t, e) {
this.setOptions(e), this.root_el = t, this.image_els = this.root_el.getElements(".large-image"), 
this.product_id = this.root_el.get("data-hero-id").toInt(), this.mobile_thumbnail_els = document.getElement(".hero-thumbnails-container").getElement(".gallery-selectors[data-hero-id=" + this.product_id + "]").getElements(".thumbnail");
var i = document.getElement(".hero-thumbnails-container").getElement(".thumbnails[data-hero-id=" + this.product_id + "]");
i && (this.thumbnail_els = i.getElements(".thumbnail").append(this.mobile_thumbnail_els)), 
_.each(this.image_els, this.setupImage.bind(this)), _.each(this.thumbnail_els, this.setupThumbnail.bind(this)), 
this.changeActiveImageById("0");
},
setupImage:function(t, e) {
var i = this.image_els[e + 1], n = this.image_els[e - 1], s = i ? i.get("data-id") :"0";
n ? n.get("data-id") :this.image_els.length - 1;
t.addEvent("click", function() {
this.changeActiveImageById(s);
}.bind(this));
},
setupThumbnail:function(t) {
var e = t.get("data-id");
t.addEvent("click", function() {
this.changeActiveImageById(e);
}.bind(this));
},
changeActiveImageById:function(t, e) {
e = e || {};
var i = this.getActiveImage(), n = this.getActiveThumbnails(), s = this.getImageById(t), o = this.getThumbnailsById(t);
if (s) {
var r = document.getElement(".quality-guaranteed");
r.setStyle("visibility", "visible"), i && i.removeClass("active"), s.addClass("active"), 
"video" === s.getChildren()[0].get("tag") && r.setStyle("visibility", "hidden");
}
o.length > 0 && (n && n.each(function(t) {
t.removeClass("active");
}), o.each(function(t) {
t.addClass("active");
})), e.no_event || this.fireEvent("change", {
id:t,
product_id:this.product_id
});
},
getImageById:function(t) {
return _.find(this.image_els, function(e) {
return e.get("data-id") === t;
});
},
getActiveImage:function() {
return _.find(this.image_els, function(t) {
return t.hasClass("active");
});
},
getThumbnailsById:function(t) {
return _.filter(this.thumbnail_els, function(e) {
return e.get("data-id") === t;
});
},
getActiveThumbnails:function() {
return _.filter(this.thumbnail_els, function(t) {
return t.hasClass("active");
});
},
preloadActiveImage:function() {
var t = this.getActiveImage();
if (t) {
var e = t.getElement("img");
Harrys.Retina.isRetina() ? e.set("src", e.get("data-src2x")) :e.set("src", e.get("data-src"));
}
},
preloadAllImages:function() {
_.each(this.image_els, function(t) {
var e = t.getElement("img");
e && (Harrys.Retina.isRetina() ? e.set("src", e.get("data-src2x")) :e.set("src", e.get("data-src")));
});
}
}), HeroSection = new Class({
Implements:[ Events, Options ],
initialize:function(t) {
this.root_el = t, this.hero_image_els = this.root_el.getElements(".product-hero"), 
this.galleries = [], this.slideshows = [], this.modifiers = this.root_el.get("data-modifiers") ? this.root_el.get("data-modifiers").split(";") :[], 
_.each(this.hero_image_els, function(t) {
switch (t.get("data-hero-type")) {
case "upsell":
break;

case "gallery":
this.initGallery(t);
}
}.bind(this));
},
changeHeroByCartItem:function(t) {
var e = this.getCurrentHeroEl(), i = this.getHeroElById(t.product.id);
this.updateThumbnails(e.get("data-hero-id"), t.product.id), e.set("data-current-hero", !1).removeClass("active"), 
i.set("data-current-hero", !0).addClass("active"), this.preloadGalleryImages(t.product);
},
updateThumbnails:function(t, e) {
var i = document.getElement(".hero-thumbnails-container");
if (i) var n = i.getElements("[data-hero-id=" + t + "]"), s = i.getElements("[data-hero-id=" + e + "]");
_.each(n, function(t) {
t.removeClass("active");
}), _.each(s, function(t) {
t.addClass("active");
});
},
initGallery:function(t) {
var e = new ImageGallery(t);
e.preloadActiveImage(), e.addEvents({
change:function(t) {
_.each(this.galleries, function(e) {
e.changeActiveImageById(t.id, {
no_event:!0
});
}), this.preloadGalleryImages(Harrys.productsManager.findById(t.product_id));
}.bind(this)
}), this.galleries.push(e);
},
getHeroType:function(t) {
return Harrys.IS_MOBILE || !this.hero_image_els.filter('[data-hero-type="' + t + '"]').length ? this.hero_image_els.get("data-hero-type")[0] :t;
},
getCurrentHeroEl:function() {
return _.find(this.hero_image_els, function(t) {
return "true" === t.get("data-current-hero");
});
},
getHeroElByType:function(t) {
return _.find(this.hero_image_els, function(e) {
return e.get("data-hero-type") === t;
});
},
getHeroElById:function(t) {
return _.find(this.hero_image_els, function(e) {
return e.get("data-hero-id").toInt() === t.toInt();
});
},
preloadGalleryImages:function(t) {
var e = _.find(this.galleries, function(e) {
return e.product_id === t.id;
});
e && e.preloadAllImages(), _.each(this.galleries, function(e) {
if (this.modifiers.length) {
var i = Harrys.productsManager.findById(e.product_id), n = _.filter(this.modifiers, function(e) {
return t.properties[e] === i.properties[e];
}).length;
n > this.modifiers.length - 2 && e.preloadActiveImage();
} else e.preloadActiveImage();
}.bind(this));
}
});

window.Modernizr = function(t, e, i) {
function n(t) {
_.cssText = t;
}
function s(t, e) {
return n(b.join(t + ";") + (e || ""));
}
function o(t, e) {
return typeof t === e;
}
function r(t, e) {
return !!~("" + t).indexOf(e);
}
function a(t, e) {
for (var n in t) {
var s = t[n];
if (!r(s, "-") && _[s] !== i) return "pfx" != e || s;
}
return !1;
}
function l(t, e, n) {
for (var s in t) {
var r = e[t[s]];
if (r !== i) return n === !1 ? t[s] :o(r, "function") ? r.bind(n || e) :r;
}
return !1;
}
function c(t, e, i) {
var n = t.charAt(0).toUpperCase() + t.slice(1), s = (t + " " + k.join(n + " ") + n).split(" ");
return o(e, "string") || o(e, "undefined") ? a(s, e) :(s = (t + " " + x.join(n + " ") + n).split(" "), 
l(s, e, i));
}
function h() {
f.input = function(i) {
for (var n = 0, s = i.length; n < s; n++) C[i[n]] = i[n] in y;
return C.list && (C.list = !!e.createElement("datalist") && !!t.HTMLDataListElement), 
C;
}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")), 
f.inputtypes = function(t) {
for (var n, s, o, r = 0, a = t.length; r < a; r++) y.setAttribute("type", s = t[r]), 
n = "text" !== y.type, n && (y.value = E, y.style.cssText = "position:absolute;visibility:hidden;", 
/^range$/.test(s) && y.style.WebkitAppearance !== i ? (g.appendChild(y), o = e.defaultView, 
n = o.getComputedStyle && "textfield" !== o.getComputedStyle(y, null).WebkitAppearance && 0 !== y.offsetHeight, 
g.removeChild(y)) :/^(search|tel)$/.test(s) || (n = /^(url|email)$/.test(s) ? y.checkValidity && y.checkValidity() === !1 :y.value != E)), 
S[t[r]] = !!n;
return S;
}("search tel url email datetime date month week time datetime-local number range color".split(" "));
}
var d, u, p = "2.6.2", f = {}, g = e.documentElement, m = "modernizr", v = e.createElement(m), _ = v.style, y = e.createElement("input"), E = ":)", b = ({}.toString, 
" -webkit- -moz- -o- -ms- ".split(" ")), w = "Webkit Moz O ms", k = w.split(" "), x = w.toLowerCase().split(" "), I = {}, S = {}, C = {}, T = [], z = T.slice, A = function(t, i, n, s) {
var o, r, a, l, c = e.createElement("div"), h = e.body, d = h || e.createElement("body");
if (parseInt(n, 10)) for (;n--; ) a = e.createElement("div"), a.id = s ? s[n] :m + (n + 1), 
c.appendChild(a);
return o = [ "&#173;", '<style id="s', m, '">', t, "</style>" ].join(""), c.id = m, 
(h ? c :d).innerHTML += o, d.appendChild(c), h || (d.style.background = "", d.style.overflow = "hidden", 
l = g.style.overflow, g.style.overflow = "hidden", g.appendChild(d)), r = i(c, t), 
h ? c.parentNode.removeChild(c) :(d.parentNode.removeChild(d), g.style.overflow = l), 
!!r;
}, O = {}.hasOwnProperty;
u = o(O, "undefined") || o(O.call, "undefined") ? function(t, e) {
return e in t && o(t.constructor.prototype[e], "undefined");
} :function(t, e) {
return O.call(t, e);
}, Function.prototype.bind || (Function.prototype.bind = function(t) {
var e = this;
if ("function" != typeof e) throw new TypeError();
var i = z.call(arguments, 1), n = function() {
if (this instanceof n) {
var s = function() {};
s.prototype = e.prototype;
var o = new s(), r = e.apply(o, i.concat(z.call(arguments)));
return Object(r) === r ? r :o;
}
return e.apply(t, i.concat(z.call(arguments)));
};
return n;
}), I.rgba = function() {
return n("background-color:rgba(150,255,150,.5)"), r(_.backgroundColor, "rgba");
}, I.multiplebgs = function() {
return n("background:url(https://),url(https://),red url(https://)"), /(url\s*\(.*?){3}/.test(_.background);
}, I.backgroundsize = function() {
return c("backgroundSize");
}, I.borderradius = function() {
return c("borderRadius");
}, I.boxshadow = function() {
return c("boxShadow");
}, I.textshadow = function() {
return "" === e.createElement("div").style.textShadow;
}, I.opacity = function() {
return s("opacity:.55"), /^0.55$/.test(_.opacity);
}, I.generatedcontent = function() {
var t;
return A([ "#", m, "{font:0/0 a}#", m, ':after{content:"', E, '";visibility:hidden;font:3px/1 a}' ].join(""), function(e) {
t = e.offsetHeight >= 3;
}), t;
}, I.video = function() {
var t = e.createElement("video"), i = !1;
try {
(i = !!t.canPlayType) && (i = new Boolean(i), i.ogg = t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, ""), 
i.h264 = t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, ""), i.webm = t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, ""));
} catch (t) {}
return i;
};
for (var H in I) u(I, H) && (d = H.toLowerCase(), f[d] = I[H](), T.push((f[d] ? "" :"no-") + d));
return f.input || h(), f.addTest = function(t, e) {
if ("object" == typeof t) for (var n in t) u(t, n) && f.addTest(n, t[n]); else {
if (t = t.toLowerCase(), f[t] !== i) return f;
e = "function" == typeof e ? e() :e, "undefined" != typeof enableClasses && enableClasses && (g.className += " " + (e ? "" :"no-") + t), 
f[t] = e;
}
return f;
}, n(""), v = y = null, f._version = p, f._prefixes = b, f._domPrefixes = x, f._cssomPrefixes = k, 
f.testProp = function(t) {
return a([ t ]);
}, f.testAllProps = c, f.testStyles = A, f;
}(this, this.document);

var CartItem = new Class({
Implements:[ Events, Options ],
options:{
id:null,
quantity:1,
customizations:{}
},
initialize:function(t) {
this.setOptions(t), this.product = Harrys.productsManager.findById(this.options.id), 
this.loaded = !!this.product, this.product_id = this.options.id, this.quantity = this.options.quantity, 
this.customizations = this.options.customizations, _.each(this.options.customizations, function(t, e) {
this[e] = t;
}.bind(this)), this._setKey();
},
toHash:function() {
return {
id:this.product_id,
quantity:this.quantity,
customizations:this.options.customizations
};
},
getDescription:function() {
var t = [ this.product.cart_description ];
return _.each(this.options.customizations, function(e, i) {
switch (i) {
case "interval":
t.push(this.getSubscriptionDescription());
break;

case "secondary_engraving":
if ("same_value_as_engraving" === this.product.properties.is_secondary_engravable) break;

default:
t.push(e);
}
}, this), _.compact(t).join(", ");
},
getSubscriptionDescription:function() {
var t = "";
if (this.options.customizations.interval > 0) {
var e = this.options.customizations.interval.toInt() / 30;
t += "Every " + e + " Month", t += e > 1 ? "s" :"";
} else t = "To be added to your shave plan";
return t;
},
getPrice:function() {
return this.product.price;
},
reload:function() {
this.product = Harrys.productsManager.findById(this.options.id), this.product.is_engravable || delete this.options.customizations.engraving, 
this.loaded = !0;
},
_setKey:function() {
this.key = "" + this.product_id, _.each(this.options.customizations, function(t, e) {
t && (this.key += "-" + e.toUpperCase() + "_" + t);
}.bind(this));
}
}), Kicksend = {
mailcheck:{
threshold:3,
defaultDomains:[ "yahoo.com", "google.com", "hotmail.com", "gmail.com", "me.com", "aol.com", "mac.com", "live.com", "comcast.net", "googlemail.com", "msn.com", "hotmail.co.uk", "yahoo.co.uk", "facebook.com", "verizon.net", "sbcglobal.net", "att.net", "gmx.com", "mail.com", "outlook.com", "icloud.com" ],
defaultTopLevelDomains:[ "co.jp", "co.uk", "com", "net", "org", "info", "edu", "gov", "mil", "ca" ],
run:function(t) {
t.domains = t.domains || Kicksend.mailcheck.defaultDomains, t.topLevelDomains = t.topLevelDomains || Kicksend.mailcheck.defaultTopLevelDomains, 
t.distanceFunction = t.distanceFunction || Kicksend.sift3Distance;
var e = function(t) {
return t;
}, i = t.suggested || e, n = t.empty || e, s = Kicksend.mailcheck.suggest(encodeURI(t.email), t.domains, t.topLevelDomains, t.distanceFunction);
return s ? i(s) :n();
},
suggest:function(t, e, i, n) {
t = t.toLowerCase();
var s = this.splitEmail(t), o = this.findClosestDomain(s.domain, e, n);
if (o) {
if (o != s.domain) return {
address:s.address,
domain:o,
full:s.address + "@" + o
};
} else {
var r = this.findClosestDomain(s.topLevelDomain, i);
if (s.domain && r && r != s.topLevelDomain) {
var a = s.domain;
return o = a.substring(0, a.lastIndexOf(s.topLevelDomain)) + r, {
address:s.address,
domain:o,
full:s.address + "@" + o
};
}
}
return !1;
},
findClosestDomain:function(t, e, i) {
var n, s = 99, o = null;
if (!t || !e) return !1;
i || (i = this.sift3Distance);
for (var r = 0; r < e.length; r++) {
if (t === e[r]) return t;
n = i(t, e[r]), n < s && (s = n, o = e[r]);
}
return s <= this.threshold && null !== o && o;
},
sift3Distance:function(t, e) {
if (null == t || 0 === t.length) return null == e || 0 === e.length ? 0 :e.length;
if (null == e || 0 === e.length) return t.length;
for (var i = 0, n = 0, s = 0, o = 0, r = 5; i + n < t.length && i + s < e.length; ) {
if (t.charAt(i + n) == e.charAt(i + s)) o++; else {
n = 0, s = 0;
for (var a = 0; a < r; a++) {
if (i + a < t.length && t.charAt(i + a) == e.charAt(i)) {
n = a;
break;
}
if (i + a < e.length && t.charAt(i) == e.charAt(i + a)) {
s = a;
break;
}
}
}
i++;
}
return (t.length + e.length) / 2 - o;
},
splitEmail:function(t) {
var e = t.split("@");
if (e.length < 2) return !1;
for (var i = 0; i < e.length; i++) if ("" === e[i]) return !1;
var n = e.pop(), s = n.split("."), o = "";
if (0 == s.length) return !1;
if (1 == s.length) o = s[0]; else {
for (var i = 1; i < s.length; i++) o += s[i] + ".";
s.length >= 2 && (o = o.substring(0, o.length - 1));
}
return {
topLevelDomain:o,
domain:n,
address:e.join("@")
};
}
}
};

"undefined" != typeof module && module.exports && (module.exports = Kicksend.mailcheck), 
"undefined" != typeof window && window.jQuery && !function(t) {
t.fn.mailcheck = function(t) {
var e = this;
if (t.suggested) {
var i = t.suggested;
t.suggested = function(t) {
i(e, t);
};
}
if (t.empty) {
var n = t.empty;
t.empty = function() {
n.call(null, e);
};
}
t.email = this.val(), Kicksend.mailcheck.run(t);
};
}(jQuery);

var Input = new Class({
Implements:[ Events, Options ],
options:{
validateOnBlur:!0,
required:!1,
pattern:null,
flashMessage:!0,
setErrorClass:!0,
appendErrors:!1,
capitalize:!1,
raiseError:!1
},
initialize:function(t, e) {
if (this.setOptions(e), this.checks = [], this.name = t.get("name"), !t || "input" !== t.get("tag")) throw new Error("Input needs to take an Input Element");
this.options.validateOnBlur && t.addEvent("blur", function() {
try {
this.validate();
} catch (t) {}
}.bind(this)), t.addEvent("input", function() {
this.onValidationPass();
}.bind(this)), t.addEvents({
change:function() {
this.fireEvent("change", this.getValue());
}.bind(this)
}), this.options.required && this.checks.push(this._checkRequired.bind(this)), this.options.capitalize && t.addEvent("input", function() {
t.set("value", t.get("value").toUpperCase());
}), this.el = t;
},
getValue:function() {
return this.el.get("value");
},
setValue:function(t) {
return this.el.set("value", t), this;
},
setPattern:function(t) {
return this.el.set("pattern", t), this.setOptions({
pattern:t
}), this;
},
setPlaceholder:function(t) {
return this.el.set("placeholder", t), this;
},
validate:function(t) {
this.checks.length > 0 ? async.auto(this.checks, function(e, i) {
t && t(e, i), e ? this.onValidationFailure(e, this.options.raiseError) :this.onValidationPass();
}.bind(this)) :t && t(null, {
success:!0
});
},
onValidationPass:function() {
return this.options.setErrorClass && this.el.removeClass("error"), this.options.appendErrors && this.el.getParent().getElements(".error-msg").destroy(), 
this;
},
onValidationFailure:function(t, e) {
if (this.options.setErrorClass && this.el.addClass("error"), this.options.appendErrors) {
var i = this.el.getParent().getElements(".error-msg");
i.length > 0 ? i.set("text", t) :new Element("span.error-msg", {
text:t
}).inject(this.el, "after");
}
if (this.options.flashMessage && new Flash(t, "errors"), e) throw new Error(t);
return this;
},
_checkRequired:function(t) {
var e = this.el.get("value");
e ? t(null, {
success:!0
}) :t("Missing Required Field");
},
enable:function() {
this.el.set("disabled", "");
},
disable:function() {
this.el.set("disabled", "disabled");
},
clear:function() {
this.setValue("");
}
}), RegexInput = new Class({
Extends:Input,
options:{
testFailureMsg:"Input Invalid"
},
initialize:function(t, e) {
if (!e || !e.regex) throw new Error("RegexInput needs RegExp for validating");
if (!(e.regex instanceof RegExp)) {
if ("string" != typeof e.regex) throw new Error("RegexInput needs RegExp for validating");
e.regex = new RegExp(e.regex);
}
this.setOptions(e), this.parent(t, this.options), this.checks.push(this._checkRegex.bind(this));
},
setRegex:function(t) {
if (!(t instanceof RegExp)) {
if ("string" != typeof t) throw new Error("RegexInput needs RegExp for validating");
t = new RegExp(t);
}
return this.setOptions({
regex:t
}), this;
},
_checkRegex:function(t) {
var e = this.el.get("value");
"" === e || this.options.regex.test(e) ? t(null, {
success:!0
}) :t(this.options.testFailureMsg);
}
}), EmailInput = new Class({
Extends:RegexInput,
options:{
regex:Harrys.VALIDATION.user.email,
required:!0,
showSuggestion:!0,
testFailureMsg:I18n.t("js.Inputs.EmailInput.error")
},
initialize:function(t, e) {
this.setOptions(e), this.parent(t, this.options), this.options.validateOnBlur && t.removeEvents("blur").addEvent("blur", function() {
this.options.showSuggestion ? this._mailcheck(function(t) {
t.suggestion || this.validate();
}.bind(this)) :this.validate();
}.bind(this));
},
_mailcheck:function(t) {
Kicksend.mailcheck.run({
email:this.getValue(),
suggested:function(e) {
this.el.addClass("suggestion");
var i = this.el.getParent().getElement(".suggestion-msg");
i || (i = new Element("span.suggestion-msg").inject(this.el, "after")), i.set("html", "Did you mean: <strong>" + e.full + "</strong>?"), 
i.getElement("strong").removeEvents("click").addEvent("click", function() {
this.setValue(e.full), this._mailcheck();
}.bind(this)), t && t({
suggestion:!0
});
}.bind(this),
empty:function() {
this.el.removeClass("suggestion"), this.el.getParent().getElements(".suggestion-msg").destroy(), 
t && t({
suggestion:!1
});
}.bind(this)
});
}
}), EngravingInput = new Class({
Extends:RegexInput,
options:{
regex:/^[A-Z0-9]{1,3}$/,
required:!0,
testFailureMsg:I18n.t("js.Inputs.EngravingInput.error")
},
initialize:function(t, e) {
this.setOptions(e), this.parent(t, this.options), this.options.lowercase && (this.options.regex = /^[a-z0-9]{1,3}$/), 
this.el.addEvent("input", function() {
this.options.lowercase ? this.el.set("value", this.el.get("value").toLowerCase()) :this.el.set("value", this.el.get("value").toUpperCase());
}.bind(this));
}
}), QuantityInput = new Class({
Extends:RegexInput,
options:{
regex:/^\d+$/
},
initialize:function(t, e) {
this.setOptions(e), this.parent(t, this.options), this.el.addEvents({
input:function() {
this.el.get("value").toInt() < 1 && this.el.set("value", 1), this.el.get("value").toInt() > 99 && this.el.set("value", 99);
}.bind(this),
blur:function() {
("" === this.el.get("value") || this.el.get("value").toInt() < 1) && this.el.set("value", 1), 
this.el.get("value").toInt() > 99 && this.el.set("value", 99);
}.bind(this),
keyup:function(t) {
var e;
t && "up" == t.key ? (e = this.get("value").toInt(), this.set("value", ++e), this.fireEvent("change", e)) :t && "down" == t.key && (e = this.get("value").toInt(), 
this.set("value", --e), this.fireEvent("change", e));
}
}), this.increase_el = this.el.getSiblings(".increase")[0], this.decrease_el = this.el.getSiblings(".decrease")[0], 
this.increase_el && this.increase_el.addEvent("click", function() {
var t = this.el.get("value").toInt();
t < 99 && this.el.set("value", ++t), this.fireEvent("change", this.getValue());
}.bind(this)), this.decrease_el && this.decrease_el.addEvent("click", function() {
var t = this.el.get("value").toInt();
t > 1 && this.el.set("value", --t), this.fireEvent("change", this.getValue());
}.bind(this));
}
}), Select = new Class({
Extends:Input,
initialize:function(t, e) {
function i() {
try {
this.validate();
} catch (t) {}
}
if (this.setOptions(e), this.checks = [], !t || "select" !== t.get("tag")) throw new Error("Select needs to take an Select Element");
this.name = t.get("name"), t.addEvents({
change:function() {
this.fireEvent("change", this.getValue());
}.bind(this)
}), this.options.validateOnBlur && t.addEvents({
blur:i.bind(this),
change:i.bind(this)
}), this.options.required && this.checks.push(this._checkRequired.bind(this)), this.el = t;
},
replaceOptionEls:function(t, e) {
return this.el.empty(), this.addOptionEl(t, "", {
disabled:"disabled",
selected:"selected"
}), _.each(e, function(t, e) {
this.addOptionEl(t, e);
}.bind(this)), this;
},
updateOptionEls:function(t) {
return _.each(t, function(t) {
this.updateOptionEl(t.text, t.value, t.other_properties);
}.bind(this)), this;
},
getOptionEls:function() {
return this.el.getElements("option");
},
findOptionEl:function(t) {
return _.find(this.getOptionEls(), function(e) {
return e.get("value") === t;
});
},
addOptionEl:function(t, e, i) {
var n = _.extend({
text:t,
value:e
}, i);
return this.el.adopt(new Element("option", n)), this;
},
removeOptionEl:function(t) {
return this.findOptionEl(t).destroy(), this;
},
updateOptionEl:function(t, e, i) {
var n = this.findOptionEl(e), s = _.extend({
text:t,
value:e
}, i);
return n.set(s), this;
}
}), Checkbox = new Class({
Extends:Input,
options:{
required:!1
},
initialize:function(t, e) {
this.setOptions(e), this.checks = [], this.root_el = t, this.checkbox = this.root_el.getElement('input[type="checkbox"]'), 
this.checkbox.addEvent("change", function() {
this.fireEvent("change", this.checkbox.get("checked") ? this.checkbox.get("data-selected-value") :this.checkbox.get("data-unselected-value"));
}.bind(this)), this.el = t;
},
isChecked:function() {
return this.checkbox.match(":checked");
},
check:function() {
this.checkbox.set("checked", !0), this.checkbox.fireEvent("change");
},
uncheck:function() {
this.checkbox.set("checked", !1), this.checkbox.fireEvent("change");
},
getValue:function() {
return this.isChecked();
},
setValue:function(t) {
return t ? this.check() :this.uncheck(), this;
}
}), Toggle = new Class({
Implements:Events,
initialize:function(t) {
this.root_el = t, this.choices = this.root_el.getElements('input[type="radio"]'), 
_.each(this.choices, function(t) {
t.addEvent("change", function() {
t.get("checked") !== !0 || this.noEvent || this.fireEvent("change", t.get("value"));
}.bind(this));
}.bind(this));
},
getCheckedChoice:function() {
return this.root_el.getElement('input[type="radio"]:checked');
},
getValue:function() {
return this.getCheckedChoice().get("value");
},
setValue:function(t, e) {
e = e || {}, this.noEvent = e.noEvent;
var i = this.root_el.getElement('input[value="' + t + '"]');
return _.each(this.choices, function(t) {
t.set("checked", !1);
}), i.set("checked", !0), this.noEvent || this.fireEvent("change", i.get("value")), 
this.noEvent = !1, this;
},
enable:function() {
_.each(this.choices, function(t) {
t.set("disabled", "");
});
},
disable:function() {
_.each(this.choices, function(t) {
t.set("disabled", "disabled");
});
}
}), ProductPageHelper = {
toggleGroundShipping:function(t) {
var e = document.getElements(".info-wrap .ground-shipping");
_.each(e, function(e) {
"foaming_shave_gel" === t ? e.addClass("active") :e.removeClass("active");
});
}
}, ModifiersSection = new Class({
Implements:Events,
$validations:[],
initialize:function(t) {
this.root_el = t, this.switch_el = this.root_el.getElement(".switch"), this.id_input = this.root_el.getElement("input.id"), 
this.product_ids = _.map(this.root_el.get("data-product-ids").split(","), function(t) {
return t.toInt();
}), this.available_products = Harrys.productsManager.findProductsWithIds(this.product_ids), 
this.switch_el && this.switch_el.addEvent("click", function() {
this.fireEvent("open");
}.bind(this));
var e = this.root_el.getElement(".quantity-selector"), i = this.root_el.getElement(".pack-selector"), n = (this.root_el.getElement(".interval-input"), 
this.root_el.getElement(".color-selector")), s = this.root_el.getElement(".engraving"), o = (this.root_el.getElement(".secondary_engraving"), 
this.root_el.getElement(".engraving-selector")), r = this.root_el.getElement(".soft-product-selector"), a = this.root_el.getElement(".tube-size-selector");
if (this.modifiers = {}, e && (this.modifiers.quantity_input = new QuantityInput(e.getElement("input")), 
this.modifiers.quantity_input.addEvents({
change:function() {
var t = {};
this.fireEvent("change", [ this.getCartItem(), t ]);
}.bind(this)
}), this.addValidation(function(t) {
t(this.modifiers.quantity_input.getValue().toInt() <= 0);
}.bind(this))), i && (this.modifiers.pack_selector = new Toggle(i), this.modifiers.pack_selector.addEvents({
change:function() {
var t = {
checkStock:!0,
changeURL:!0,
pack_size:!0
};
this.updateId(), this.fireEvent("change", [ this.getCartItem(), t ]);
}.bind(this)
})), n && (this.modifiers.color_selector = new Toggle(n), this.modifiers.color_selector.addEvents({
change:function() {
var t = {
changeHeroImage:!0,
checkStock:!0,
changeURL:!0,
color:!0
};
this.updateId(), this.fireEvent("change", [ this.getCartItem(), t ]);
}.bind(this)
})), s && (this.modifiers.engraving_input = new EngravingInput(s.getElement("input")), 
this.modifiers.engraving_input.addEvents({
change:function() {
var t = {};
this.fireEvent("change", [ this.getCartItem(), t ]);
}.bind(this)
}), this.addValidation(function(t) {
this.modifiers.engraving_input.validate(t);
}.bind(this))), o) {
this.modifiers.engraving_selector = new Checkbox(o);
var l = (o.getElements("input[type=text]"), o.getElements('input[type="text"]')), c = "dual-engraving" === o.get("data-modifier");
_.each(l, function(t) {
var e = t.get("id"), i = o.getElements("label[for=" + e + "]");
t.addEvents({
focus:function() {
_.each(i, function(t) {
t.addClass("focus");
});
},
blur:function() {
_.each(i, function(t) {
t.removeClass("focus");
});
}
});
});
var h = _.map(l, function(t) {
var e = t.get("data-lowercase"), i = {
lowercase:!!e
}, n = new EngravingInput(t, i);
return this.addValidation(function(t) {
this.modifiers.engraving_selector.isChecked() ? n.validate(t) :t();
}.bind(this)), n.addEvent("change", function() {
this.fireEvent("change", this.getCartItem());
}.bind(this)), n;
}.bind(this));
this.modifiers.engraving_input = h[0], this.modifiers.secondary_engraving_input = c ? h[0] :h[1], 
this.modifiers.engraving_selector.addEvents({
change:function() {
e && this.modifiers.quantity_input.setValue(1), this.updateId();
var t = {
checkStock:!0,
changeHeroImage:!0
};
this.fireEvent("change", [ this.getCartItem(), t ]);
}.bind(this)
});
}
r && (ProductPageHelper.toggleGroundShipping(r.getElement("input[checked='checked']").value), 
this.modifiers.soft_product_selector = new Toggle(r), this.modifiers.soft_product_selector.addEvents({
change:function(t) {
var e = {
changeHeroImage:!0,
checkStock:!0,
changeURL:!0
};
this.updateId();
var i = r.getElement(".cutoff");
i && ("foaming_shave_gel" === t ? i.show() :i.hide()), ProductPageHelper.toggleGroundShipping(t), 
this.fireEvent("change", [ this.getCartItem(), e ]);
}.bind(this)
})), a && (this.modifiers.tube_size_selector = new Select(a.getElement("select")), 
this.modifiers.tube_size_selector.addEvents({
change:function() {
var t = {
changeHeroImage:!0,
checkStock:!0,
changeURL:!0,
tube_size:!0
};
this.updateId(), this.fireEvent("change", [ this.getCartItem(), t ]);
}.bind(this)
}));
},
updateId:function() {
var t = (Harrys.productsManager.findById(this.id_input.get("value")), {});
if (this.modifiers.pack_selector && (t.pack_size = this.modifiers.pack_selector.getValue()), 
this.modifiers.color_selector && (t.color = this.modifiers.color_selector.getValue()), 
this.modifiers.tube_size_selector && (t.tube_size = this.modifiers.tube_size_selector.getValue()), 
this.modifiers.soft_product_selector && (t.soft_product_type = this.modifiers.soft_product_selector.getValue()), 
this.modifiers.engraving_selector && (t.is_engravable = this.modifiers.engraving_selector.isChecked()), 
!_.isEmpty(t)) {
var e = _.findWhere(this.available_products, t);
this.id_input.set("value", e.id);
}
},
setIdByURL:function() {
var t = document.URL.toURI().get("file"), e = document.URL.toURI().get("directory");
if (!t || "/products/" === e) return this;
var i = Harrys.productsManager.findById(this.id_input.get("value"));
return color = t.split("-").join(" ").capitalize(), i = _.findWhere(this.available_products, {
color:color
}) || i, this.modifiers.color_selector && this.modifiers.color_selector.setValue(i.properties.color), 
pack_size = t.split("-")[0], i = Harrys.productsManager.find({
pack_size:pack_size
}) || i, this.modifiers.pack_selector && this.modifiers.pack_selector.setValue(i.properties.pack_size), 
this.modifiers.engraving_selector && "engraved" == t && this.modifiers.engraving_selector.check(), 
this.updateId(), this.fireEvent("change", [ this.getCartItem(), {
changeHeroImage:!0,
checkStock:!0
} ]), this;
},
getCartItem:function() {
var t = this.modifiers.engraving_selector && this.modifiers.engraving_selector.isChecked(), e = !!this.modifiers.engraving_selector, i = !!this.modifiers.engraving_input, n = !!this.modifiers.secondary_engraving_input, s = (t || !e) && i, o = (t || !e) && n, r = !!this.modifiers.interval_input, a = {};
return a.id = this.id_input.get("value"), a.quantity = this.modifiers.quantity_input ? this.modifiers.quantity_input.getValue() :1, 
a.customizations = {}, s && (a.customizations.engraving = this.modifiers.engraving_input.getValue()), 
o && (a.customizations.secondary_engraving = this.modifiers.secondary_engraving_input.getValue()), 
r && (a.customizations.interval = this.modifiers.interval_input.getValue()), new CartItem(a);
},
open:function() {
this.root_el.removeClass("closed");
},
close:function() {
this.root_el.addClass("closed");
},
addValidation:function(t) {
return this.$validations.push(t), this;
},
validate:function(t) {
this.$validations.length > 0 ? async.series(this.$validations, t) :t(null, {
success:!0
});
}
}), ProductForm = new Class({
Implements:[ Events, Options ],
options:{
show_mini_cart:!0
},
initialize:function(t, e) {
this.setOptions(e), this.rootEl = t, this.price_el = this.rootEl.getElement(".price"), 
this.price_text_el = this.rootEl.getElement(".price-text"), this.description_el = this.rootEl.getElement(".description"), 
this.color_name_el = this.rootEl.getElement(".color-selector .text .secondary"), 
this.pack_size_el = this.rootEl.getElement(".pack-selector .text .secondary"), this.tube_size_el = this.rootEl.getElement(".tube-size-selector .text .secondary"), 
this.add_to_cart_button = new Button(this.rootEl.getElement("button.add-to-cart")), 
this.sold_out_button = new Button(this.rootEl.getElement("button.sold-out, .button.sold-out")), 
this.mod_section_els = this.rootEl.getElements(".modifiers-form"), this.mod_sections = [], 
_.each(this.mod_section_els, function(t) {
var e = new ModifiersSection(t);
this.mod_sections.push(e), e.addEvents({
open:function() {
this.active_mod_section.close(), e.open(), this.active_mod_section = e;
}.bind(this),
change:function(t, e) {
if (e = e || {}, this.price_el && this.price_el.set("text", "$" + t.product.price.toInt()), 
this.price_text_el && this.price_text_el.set("text", t.product.price_text), this.description_el && this.description_el.set("text", t.product.description), 
t.product.pack_size && this.pack_size_el && e.pack_size) {
var i = t.product.pack_size + " Blades";
this.changeElementText(this.pack_size_el, i);
}
t.product.color && this.color_name_el && e.color && this.changeElementText(this.color_name_el, t.product.color), 
t.product.tube_size && this.tube_size_el && e.tube_size && this.changeElementText(this.tube_size_el, t.product.tube_size), 
this.fireEvent("change", t), e.checkStock && this.checkStock(t);
}.bind(this)
}), t.hasClass("closed") || (this.active_mod_section = e);
}.bind(this));
var i = this.active_mod_section.getCartItem().product;
ProductPageHelper.toggleGroundShipping(i.soft_product_type);
var n = {
show_mini_cart:this.options.show_mini_cart
};
this.add_to_cart_button.addEvent("click", function() {
this.active_mod_section.validate(function(t) {
t || Harrys.cart.addItem(this.active_mod_section.getCartItem(), n);
}.bind(this));
}.bind(this));
},
checkStock:function(t) {
var e = _.chain(this.rootEl.getElements(".availability")).filter(function(t) {
return t.isVisible();
}).first().value(), i = t.product.in_stock;
i.US && i.CA ? (this.sold_out_button.el.hide(), this.add_to_cart_button.el.show(), 
this.mod_section_els.removeClass("disabled"), e && e.set("text", I18n.t("js.product_page.stock.in_stock"))) :i.US ? (this.sold_out_button.el.hide(), 
this.add_to_cart_button.el.show(), this.mod_section_els.removeClass("disabled"), 
e && e.set("text", I18n.t("js.product_page.stock.in_stock_us"))) :i.CA ? (this.sold_out_button.el.hide(), 
this.add_to_cart_button.el.show(), this.mod_section_els.removeClass("disabled"), 
e && e.set("text", I18n.t("js.product_page.stock.in_stock_ca"))) :(this.sold_out_button.el.show(), 
this.add_to_cart_button.el.hide(), this.mod_section_els.addClass("disabled"), e && e.hide());
},
changeElementText:function(t, e) {
if (0 === t.getStyle("opacity")) t.set("text", e), t.fade("in"); else {
var i = new Fx.Tween(t, {
duration:300,
property:"opacity"
}).start(1, 0);
i.addEvent("complete", function() {
t.set("text", e), t.fade("in");
});
}
},
displayColorName:function() {
this.color_name_el && this.color_name_el.fade("in");
},
changeURL:function(t) {
t.color && (url = t.color.toLowerCase().replace(" ", "-")), t.pack_size && (url = t.pack_size + "-pack"), 
Modernizr.history && history.pushState(null, null, url);
}
}), Slide = new Class({
Implements:Events,
initialize:function(t, e, i) {
this.rootEl = t, this.parentEl = e, this.index = i;
},
insert:function(t) {
this.rootEl.inject(this.parentEl, t);
},
remove:function() {
this.rootEl = this.rootEl.dispose();
}
}), ProgressBar = new Class({
Implements:Events,
initialize:function(t, e) {
var i;
this.count = e, this.position = 1, this.rootEl = t, this.sliderEl = this.rootEl.getElement(".slider"), 
i = 1 / e * 100, this.sliderEl.setStyle("width", i + "%"), this.slideFx = new Fx.Tween(this.sliderEl, {
duration:"1000",
property:"left",
unit:"%"
});
},
move:function(t) {
var e;
"next" == t ? this.position += 1 :"previous" == t && (this.position -= 1), this.position >= this.count + 1 && (this.position = 1), 
0 === this.position && (this.position = this.count), e = (this.position - 1) / this.count * 100, 
this.slideFx.start(e);
}
}), Gallery = new Class({
Implements:Events,
initialize:function(t, e) {
function i(t) {
var e;
e = t.target.hasClass("right") ? "right" :"left", this.changeSlide(e);
}
function n() {
r = setInterval(changeSlide, 5e3, "right");
}
function s() {
clearTimeout(r);
}
var o, r, a;
if (this.rootEl = t, this.frameEl = this.rootEl.getElement(".frame"), this.slidesEl = this.rootEl.getElement(".slides"), 
this.getSlides(), this.slide_width = this.slideEls[0].getStyle("width").toInt(), 
o = this.slideEls.length * this.slide_width, this.slidesEl.setStyle("width", o), 
this.arrowEls = this.rootEl.getElements(".arrow"), this.arrowEls.addEvents({
click:i.bind(this),
remove_clicks:function() {
this.arrowEls.removeEvents("click");
}.bind(this),
add_clicks:function() {
this.arrowEls.addEvent("click", i.bind(this));
}.bind(this)
}), a = this.rootEl.getElement(".progress"), a && (this.progress_bar = new ProgressBar(a, this.slideEls.length)), 
e.autoplay && (n(), galleryEl.addEvent("mouseover", s), galleryEl.addEvent("mouseout", n)), 
1 === $$(".slideshow").length) {
var l = function(t) {
var e = this.rootEl.getCoordinates().top + this.rootEl.getCoordinates().height, i = window.getScrollTop() + window.getHeight();
i < e || ("left" === t.key ? this.changeSlide("left") :"right" === t.key && this.changeSlide("right"));
}.bind(this);
window.addEvents({
keydown:l,
remove_keypressed:function() {
window.removeEvent("keydown", l);
},
add_keypressed:function() {
window.addEvent("keydown", l);
}
});
}
},
completeMissingSlides:function() {
for (;this.slideEls.length < 5 && this.slideEls.length > 0; ) {
var t = [];
this.slideEls.each(function(e) {
t.push(e.clone().inject(e.getParent()));
}, this), this.slideEls = this.slideEls.concat(t);
}
},
getSlides:function() {
function t(t, e) {
this.slides[e] = new Slide(t, this.slidesEl, e);
}
this.slideEls = this.rootEl.getElements(".slide"), this.completeMissingSlides(), 
this.slides = [], this.slideEls.each(t, this);
},
changeSlide:function(t) {
this.arrowEls[0].fireEvent("remove_clicks"), window.fireEvent("remove_keypressed"), 
this.arrowEls.fade("out"), "right" == t ? (this.next(), this.progress_bar && this.progress_bar.move("next")) :(this.previous(), 
this.progress_bar && this.progress_bar.move("previous"));
},
next:function() {
function t() {
e.remove();
var t;
t = n >= this.slides.length - 1 ? 0 :n + 1, this.slides[t].insert("bottom"), this.slides[t].rootEl.setStyle("width", this.slide_width), 
this.getSlides(), this.arrowEls[0].fireEvent("add_clicks"), window.fireEvent("add_keypressed"), 
this.arrowEls.fade("in"), s.removeEvents();
}
var e = this.slides[0], i = this.slides[this.slides.length - 1], n = (e.index, i.index), s = new Fx.Tween(e.rootEl, {
duration:1e3,
property:"width",
link:"ignore"
});
s.addEvent("complete", t.bind(this)), s.start(0);
},
previous:function() {
var t = this.slides[this.slides.length - 1], e = t.rootEl.dispose();
e.setStyle("width", 0), e.inject(this.slidesEl, "top"), this.getSlides();
var i = (this.slides[0], new Fx.Tween(e, {
duration:1e3,
property:"width",
link:"chain",
unit:"px"
}));
i.addEvent("complete", function() {
this.arrowEls[0].fireEvent("add_clicks"), window.fireEvent("add_keypressed"), this.arrowEls.fade("in"), 
i.removeEvents();
}.bind(this)), i.start(this.slide_width);
}
}), BgCoverVideo = new Class({
Implements:[ Events, Options ],
options:{
yOffset:0,
video_r:16 / 9,
lock:"center"
},
initialize:function(t, e) {
function i() {
var t, e = n.parent_el.getSize().y, i = n.parent_el.getSize().x, s = i / e;
if (s < n.options.video_r) "center" === n.options.lock ? t = {
top:0,
left:-(e * n.options.video_r - i) / 2,
height:e
} :"left" === n.options.lock ? t = {
top:0,
left:0,
height:e
} :"right" === n.options.lock && (t = {
top:0,
right:0,
height:e
}); else if ("center" === n.options.lock) {
var o = -(i / n.options.video_r - e) / 2;
Math.abs(o) > n.options.yOffset && (o += n.options.yOffset), t = {
top:o,
left:0,
height:i / n.options.video_r
};
} else "top" === n.options.lock ? t = {
top:0,
left:0,
height:i / n.options.video_r
} :"bottom" === n.options.lock && (t = {
bottom:0,
left:0,
height:i / n.options.video_r
});
n.el.setStyles(t);
}
var n = this;
this.setOptions(e), this.el = t, this.parent_el = this.el.getParent(), this.parent_el.setStyle("overflow", "hidden"), 
i(), window.addEvent("resize", i);
}
});

/*!
 * skrollr core
 *
 * Alexander Prinzhorn - https://github.com/Prinzhorn/skrollr
 *
 * Free to use under terms of MIT license
 */
!function(t, e, i) {
"use strict";
function n(i) {
if (s = e.documentElement, o = e.body, G(), at = this, i = i || {}, ut = i.constants || {}, 
i.easing) for (var n in i.easing) W[n] = i.easing[n];
yt = i.edgeStrategy || "set", ht = {
beforerender:i.beforerender,
render:i.render,
keyframe:i.keyframe
}, dt = i.forceHeight !== !1, dt && (Vt = i.scale || 1), pt = i.mobileDeceleration || x, 
gt = i.smoothScrolling !== !1, mt = i.smoothScrollingDuration || S, vt = {
targetTop:at.getScrollTop()
}, Ut = (i.mobileCheck || function() {
return /Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent || navigator.vendor || t.opera);
})(), Ut ? (ct = e.getElementById(i.skrollrBody || I), ct && rt(), Q(), At(s, [ _, b ], [ y ])) :At(s, [ _, E ], [ y ]), 
at.refresh(), wt(t, "resize orientationchange", function() {
var t = s.clientWidth, e = s.clientHeight;
e === qt && t === Mt || (qt = e, Mt = t, $t = !0);
});
var r = N();
return function t() {
Z(), bt = r(t);
}(), at;
}
var s, o, r = {
get:function() {
return at;
},
init:function(t) {
return at || new n(t);
},
VERSION:"0.6.29"
}, a = Object.prototype.hasOwnProperty, l = t.Math, c = t.getComputedStyle, h = "touchstart", d = "touchmove", u = "touchcancel", p = "touchend", f = "skrollable", g = f + "-before", m = f + "-between", v = f + "-after", _ = "skrollr", y = "no-" + _, E = _ + "-desktop", b = _ + "-mobile", w = "linear", k = 1e3, x = .004, I = "skrollr-body", S = 200, C = "start", T = "end", z = "center", A = "bottom", O = "___skrollable_id", H = /^(?:input|textarea|button|select)$/i, L = /^\s+|\s+$/g, B = /^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/, P = /\s*(@?[\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi, V = /^(@?[a-z\-]+)\[(\w+)\]$/, F = /-([a-z0-9_])/g, R = function(t, e) {
return e.toUpperCase();
}, D = /[\-+]?[\d]*\.?[\d]+/g, M = /\{\?\}/g, q = /rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g, $ = /[a-z\-]+-gradient/g, j = "", U = "", G = function() {
var t = /^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;
if (c) {
var e = c(o, null);
for (var i in e) if (j = i.match(t) || +i == i && e[i].match(t)) break;
if (!j) return void (j = U = "");
j = j[0], "-" === j.slice(0, 1) ? (U = j, j = {
"-webkit-":"webkit",
"-moz-":"Moz",
"-ms-":"ms",
"-o-":"O"
}[j]) :U = "-" + j.toLowerCase() + "-";
}
}, N = function() {
var e = t.requestAnimationFrame || t[j.toLowerCase() + "RequestAnimationFrame"], i = Lt();
return !Ut && e || (e = function(e) {
var n = Lt() - i, s = l.max(0, 1e3 / 60 - n);
return t.setTimeout(function() {
i = Lt(), e();
}, s);
}), e;
}, K = function() {
var e = t.cancelAnimationFrame || t[j.toLowerCase() + "CancelAnimationFrame"];
return !Ut && e || (e = function(e) {
return t.clearTimeout(e);
}), e;
}, W = {
begin:function() {
return 0;
},
end:function() {
return 1;
},
linear:function(t) {
return t;
},
quadratic:function(t) {
return t * t;
},
cubic:function(t) {
return t * t * t;
},
swing:function(t) {
return -l.cos(t * l.PI) / 2 + .5;
},
sqrt:function(t) {
return l.sqrt(t);
},
outCubic:function(t) {
return l.pow(t - 1, 3) + 1;
},
bounce:function(t) {
var e;
if (t <= .5083) e = 3; else if (t <= .8489) e = 9; else if (t <= .96208) e = 27; else {
if (!(t <= .99981)) return 1;
e = 91;
}
return 1 - l.abs(3 * l.cos(t * e * 1.028) / e);
}
};
n.prototype.refresh = function(t) {
var n, s, o = !1;
for (t === i ? (o = !0, lt = [], jt = 0, t = e.getElementsByTagName("*")) :t.length === i && (t = [ t ]), 
n = 0, s = t.length; n < s; n++) {
var r = t[n], a = r, l = [], c = gt, h = yt, d = !1;
if (o && O in r && delete r[O], r.attributes) {
for (var u = 0, p = r.attributes.length; u < p; u++) {
var g = r.attributes[u];
if ("data-anchor-target" !== g.name) if ("data-smooth-scrolling" !== g.name) if ("data-edge-strategy" !== g.name) if ("data-emit-events" !== g.name) {
var m = g.name.match(B);
if (null !== m) {
var v = {
props:g.value,
element:r,
eventType:g.name.replace(F, R)
};
l.push(v);
var _ = m[1];
_ && (v.constant = _.substr(1));
var y = m[2];
/p$/.test(y) ? (v.isPercentage = !0, v.offset = (0 | y.slice(0, -1)) / 100) :v.offset = 0 | y;
var E = m[3], b = m[4] || E;
E && E !== C && E !== T ? (v.mode = "relative", v.anchors = [ E, b ]) :(v.mode = "absolute", 
E === T ? v.isEnd = !0 :v.isPercentage || (v.offset = v.offset * Vt));
}
} else d = !0; else h = g.value; else c = "off" !== g.value; else if (a = e.querySelector(g.value), 
null === a) throw 'Unable to find anchor target "' + g.value + '"';
}
if (l.length) {
var w, k, x;
!o && O in r ? (x = r[O], w = lt[x].styleAttr, k = lt[x].classAttr) :(x = r[O] = jt++, 
w = r.style.cssText, k = zt(r)), lt[x] = {
element:r,
styleAttr:w,
classAttr:k,
anchorTarget:a,
keyFrames:l,
smoothScrolling:c,
edgeStrategy:h,
emitEvents:d,
lastFrameIndex:-1
}, At(r, [ f ], []);
}
}
}
for (St(), n = 0, s = t.length; n < s; n++) {
var I = lt[t[n][O]];
I !== i && (J(I), et(I));
}
return at;
}, n.prototype.relativeToAbsolute = function(t, e, i) {
var n = s.clientHeight, o = t.getBoundingClientRect(), r = o.top, a = o.bottom - o.top;
return e === A ? r -= n :e === z && (r -= n / 2), i === A ? r += a :i === z && (r += a / 2), 
r += at.getScrollTop(), r + .5 | 0;
}, n.prototype.animateTo = function(t, e) {
e = e || {};
var n = Lt(), s = at.getScrollTop();
return ft = {
startTop:s,
topDiff:t - s,
targetTop:t,
duration:e.duration || k,
startTime:n,
endTime:n + (e.duration || k),
easing:W[e.easing || w],
done:e.done
}, ft.topDiff || (ft.done && ft.done.call(at, !1), ft = i), at;
}, n.prototype.stopAnimateTo = function() {
ft && ft.done && ft.done.call(at, !0), ft = i;
}, n.prototype.isAnimatingTo = function() {
return !!ft;
}, n.prototype.isMobile = function() {
return Ut;
}, n.prototype.setScrollTop = function(e, i) {
return _t = i === !0, Ut ? Gt = l.min(l.max(e, 0), Pt) :t.scrollTo(0, e), at;
}, n.prototype.getScrollTop = function() {
return Ut ? Gt :t.pageYOffset || s.scrollTop || o.scrollTop || 0;
}, n.prototype.getMaxScrollTop = function() {
return Pt;
}, n.prototype.on = function(t, e) {
return ht[t] = e, at;
}, n.prototype.off = function(t) {
return delete ht[t], at;
}, n.prototype.destroy = function() {
var t = K();
t(bt), xt(), At(s, [ y ], [ _, E, b ]);
for (var e = 0, n = lt.length; e < n; e++) ot(lt[e].element);
s.style.overflow = o.style.overflow = "", s.style.height = o.style.height = "", 
ct && r.setStyle(ct, "transform", "none"), at = i, ct = i, ht = i, dt = i, Pt = 0, 
Vt = 1, ut = i, pt = i, Ft = "down", Rt = -1, Mt = 0, qt = 0, $t = !1, ft = i, gt = i, 
mt = i, vt = i, _t = i, jt = 0, yt = i, Ut = !1, Gt = 0, Et = i;
};
var Q = function() {
var n, r, a, c, f, g, m, v, _, y, E, b;
wt(s, [ h, d, u, p ].join(" "), function(t) {
var s = t.changedTouches[0];
for (c = t.target; 3 === c.nodeType; ) c = c.parentNode;
switch (f = s.clientY, g = s.clientX, y = t.timeStamp, H.test(c.tagName) || t.preventDefault(), 
t.type) {
case h:
n && n.blur(), at.stopAnimateTo(), n = c, r = m = f, a = g, _ = y;
break;

case d:
H.test(c.tagName) && e.activeElement !== c && t.preventDefault(), v = f - m, b = y - E, 
at.setScrollTop(Gt - v, !0), m = f, E = y;
break;

default:
case u:
case p:
var o = r - f, w = a - g, k = w * w + o * o;
if (k < 49) {
if (!H.test(n.tagName)) {
n.focus();
var x = e.createEvent("MouseEvents");
x.initMouseEvent("click", !0, !0, t.view, 1, s.screenX, s.screenY, s.clientX, s.clientY, t.ctrlKey, t.altKey, t.shiftKey, t.metaKey, 0, null), 
n.dispatchEvent(x);
}
return;
}
n = i;
var I = v / b;
I = l.max(l.min(I, 3), -3);
var S = l.abs(I / pt), C = I * S + .5 * pt * S * S, T = at.getScrollTop() - C, z = 0;
T > Pt ? (z = (Pt - T) / C, T = Pt) :T < 0 && (z = -T / C, T = 0), S *= 1 - z, at.animateTo(T + .5 | 0, {
easing:"outCubic",
duration:S
});
}
}), t.scrollTo(0, 0), s.style.overflow = o.style.overflow = "hidden";
}, X = function() {
var t, e, i, n, o, r, a, c, h, d, u, p = s.clientHeight, f = Ct();
for (c = 0, h = lt.length; c < h; c++) for (t = lt[c], e = t.element, i = t.anchorTarget, 
n = t.keyFrames, o = 0, r = n.length; o < r; o++) a = n[o], d = a.offset, u = f[a.constant] || 0, 
a.frame = d, a.isPercentage && (d *= p, a.frame = d), "relative" === a.mode && (ot(e), 
a.frame = at.relativeToAbsolute(i, a.anchors[0], a.anchors[1]) - d, ot(e, !0)), 
a.frame += u, dt && !a.isEnd && a.frame > Pt && (Pt = a.frame);
for (Pt = l.max(Pt, Tt()), c = 0, h = lt.length; c < h; c++) {
for (t = lt[c], n = t.keyFrames, o = 0, r = n.length; o < r; o++) a = n[o], u = f[a.constant] || 0, 
a.isEnd && (a.frame = Pt - a.offset + u);
t.keyFrames.sort(Bt);
}
}, Y = function(t, e) {
for (var i = 0, n = lt.length; i < n; i++) {
var s, o, l = lt[i], c = l.element, h = l.smoothScrolling ? t :e, d = l.keyFrames, u = d.length, p = d[0], _ = d[d.length - 1], y = h < p.frame, E = h > _.frame, b = y ? p :_, w = l.emitEvents, k = l.lastFrameIndex;
if (y || E) {
if (y && l.edge === -1 || E && 1 === l.edge) continue;
switch (y ? (At(c, [ g ], [ v, m ]), w && k > -1 && (It(c, p.eventType, Ft), l.lastFrameIndex = -1)) :(At(c, [ v ], [ g, m ]), 
w && k < u && (It(c, _.eventType, Ft), l.lastFrameIndex = u)), l.edge = y ? -1 :1, 
l.edgeStrategy) {
case "reset":
ot(c);
continue;

case "ease":
h = b.frame;
break;

default:
case "set":
var x = b.props;
for (s in x) a.call(x, s) && (o = st(x[s].value), 0 === s.indexOf("@") ? c.setAttribute(s.substr(1), o) :r.setStyle(c, s, o));
continue;
}
} else 0 !== l.edge && (At(c, [ f, m ], [ g, v ]), l.edge = 0);
for (var I = 0; I < u - 1; I++) if (h >= d[I].frame && h <= d[I + 1].frame) {
var S = d[I], C = d[I + 1];
for (s in S.props) if (a.call(S.props, s)) {
var T = (h - S.frame) / (C.frame - S.frame);
T = S.props[s].easing(T), o = nt(S.props[s].value, C.props[s].value, T), o = st(o), 
0 === s.indexOf("@") ? c.setAttribute(s.substr(1), o) :r.setStyle(c, s, o);
}
w && k !== I && ("down" === Ft ? It(c, S.eventType, Ft) :It(c, C.eventType, Ft), 
l.lastFrameIndex = I);
break;
}
}
}, Z = function() {
$t && ($t = !1, St());
var t, e, n = at.getScrollTop(), s = Lt();
if (ft) s >= ft.endTime ? (n = ft.targetTop, t = ft.done, ft = i) :(e = ft.easing((s - ft.startTime) / ft.duration), 
n = ft.startTop + e * ft.topDiff | 0), at.setScrollTop(n, !0); else if (!_t) {
var o = vt.targetTop - n;
o && (vt = {
startTop:Rt,
topDiff:n - Rt,
targetTop:n,
startTime:Dt,
endTime:Dt + mt
}), s <= vt.endTime && (e = W.sqrt((s - vt.startTime) / mt), n = vt.startTop + e * vt.topDiff | 0);
}
if (Ut && ct && r.setStyle(ct, "transform", "translate(0, " + -Gt + "px) " + Et), 
_t || Rt !== n) {
Ft = n > Rt ? "down" :n < Rt ? "up" :Ft, _t = !1;
var a = {
curTop:n,
lastTop:Rt,
maxTop:Pt,
direction:Ft
}, l = ht.beforerender && ht.beforerender.call(at, a);
l !== !1 && (Y(n, at.getScrollTop()), Rt = n, ht.render && ht.render.call(at, a)), 
t && t.call(at, !1);
}
Dt = s;
}, J = function(t) {
for (var e = 0, i = t.keyFrames.length; e < i; e++) {
for (var n, s, o, r, a = t.keyFrames[e], l = {}; null !== (r = P.exec(a.props)); ) o = r[1], 
s = r[2], n = o.match(V), null !== n ? (o = n[1], n = n[2]) :n = w, s = s.indexOf("!") ? tt(s) :[ s.slice(1) ], 
l[o] = {
value:s,
easing:W[n]
};
a.props = l;
}
}, tt = function(t) {
var e = [];
return q.lastIndex = 0, t = t.replace(q, function(t) {
return t.replace(D, function(t) {
return t / 255 * 100 + "%";
});
}), U && ($.lastIndex = 0, t = t.replace($, function(t) {
return U + t;
})), t = t.replace(D, function(t) {
return e.push(+t), "{?}";
}), e.unshift(t), e;
}, et = function(t) {
var e, i, n = {};
for (e = 0, i = t.keyFrames.length; e < i; e++) it(t.keyFrames[e], n);
for (n = {}, e = t.keyFrames.length - 1; e >= 0; e--) it(t.keyFrames[e], n);
}, it = function(t, e) {
var i;
for (i in e) a.call(t.props, i) || (t.props[i] = e[i]);
for (i in t.props) e[i] = t.props[i];
}, nt = function(t, e, i) {
var n, s = t.length;
if (s !== e.length) throw "Can't interpolate between \"" + t[0] + '" and "' + e[0] + '"';
var o = [ t[0] ];
for (n = 1; n < s; n++) o[n] = t[n] + (e[n] - t[n]) * i;
return o;
}, st = function(t) {
var e = 1;
return M.lastIndex = 0, t[0].replace(M, function() {
return t[e++];
});
}, ot = function(t, e) {
t = [].concat(t);
for (var i, n, s = 0, o = t.length; s < o; s++) n = t[s], i = lt[n[O]], i && (e ? (n.style.cssText = i.dirtyStyleAttr, 
At(n, i.dirtyClassAttr)) :(i.dirtyStyleAttr = n.style.cssText, i.dirtyClassAttr = zt(n), 
n.style.cssText = i.styleAttr, At(n, i.classAttr)));
}, rt = function() {
Et = "translateZ(0)", r.setStyle(ct, "transform", Et);
var t = c(ct), e = t.getPropertyValue("transform"), i = t.getPropertyValue(U + "transform"), n = e && "none" !== e || i && "none" !== i;
n || (Et = "");
};
r.setStyle = function(t, e, i) {
var n = t.style;
if (e = e.replace(F, R).replace("-", ""), "zIndex" === e) isNaN(i) ? n[e] = i :n[e] = "" + (0 | i); else if ("float" === e) n.styleFloat = n.cssFloat = i; else try {
j && (n[j + e.slice(0, 1).toUpperCase() + e.slice(1)] = i), n[e] = i;
} catch (t) {}
};
var at, lt, ct, ht, dt, ut, pt, ft, gt, mt, vt, _t, yt, Et, bt, wt = r.addEvent = function(e, i, n) {
var s = function(e) {
return e = e || t.event, e.target || (e.target = e.srcElement), e.preventDefault || (e.preventDefault = function() {
e.returnValue = !1, e.defaultPrevented = !0;
}), n.call(this, e);
};
i = i.split(" ");
for (var o, r = 0, a = i.length; r < a; r++) o = i[r], e.addEventListener ? e.addEventListener(o, n, !1) :e.attachEvent("on" + o, s), 
Nt.push({
element:e,
name:o,
listener:n
});
}, kt = r.removeEvent = function(t, e, i) {
e = e.split(" ");
for (var n = 0, s = e.length; n < s; n++) t.removeEventListener ? t.removeEventListener(e[n], i, !1) :t.detachEvent("on" + e[n], i);
}, xt = function() {
for (var t, e = 0, i = Nt.length; e < i; e++) t = Nt[e], kt(t.element, t.name, t.listener);
Nt = [];
}, It = function(t, e, i) {
ht.keyframe && ht.keyframe.call(at, t, e, i);
}, St = function() {
var t = at.getScrollTop();
Pt = 0, dt && !Ut && (o.style.height = ""), X(), dt && !Ut && (o.style.height = Pt + s.clientHeight + "px"), 
Ut ? at.setScrollTop(l.min(at.getScrollTop(), Pt)) :at.setScrollTop(t, !0), _t = !0;
}, Ct = function() {
var t, e, i = s.clientHeight, n = {};
for (t in ut) e = ut[t], "function" == typeof e ? e = e.call(at) :/p$/.test(e) && (e = e.slice(0, -1) / 100 * i), 
n[t] = e;
return n;
}, Tt = function() {
var t, e = 0;
return ct && (e = l.max(ct.offsetHeight, ct.scrollHeight)), t = l.max(e, o.scrollHeight, o.offsetHeight, s.scrollHeight, s.offsetHeight, s.clientHeight), 
t - s.clientHeight;
}, zt = function(e) {
var i = "className";
return t.SVGElement && e instanceof t.SVGElement && (e = e[i], i = "baseVal"), e[i];
}, At = function(e, n, s) {
var o = "className";
if (t.SVGElement && e instanceof t.SVGElement && (e = e[o], o = "baseVal"), s === i) return void (e[o] = n);
for (var r = e[o], a = 0, l = s.length; a < l; a++) r = Ht(r).replace(Ht(s[a]), " ");
r = Ot(r);
for (var c = 0, h = n.length; c < h; c++) Ht(r).indexOf(Ht(n[c])) === -1 && (r += " " + n[c]);
e[o] = Ot(r);
}, Ot = function(t) {
return t.replace(L, "");
}, Ht = function(t) {
return " " + t + " ";
}, Lt = Date.now || function() {
return +new Date();
}, Bt = function(t, e) {
return t.frame - e.frame;
}, Pt = 0, Vt = 1, Ft = "down", Rt = -1, Dt = Lt(), Mt = 0, qt = 0, $t = !1, jt = 0, Ut = !1, Gt = 0, Nt = [];
"function" == typeof define && define.amd ? define([], function() {
return r;
}) :"undefined" != typeof module && module.exports ? module.exports = r :t.skrollr = r;
}(window, document);

var AnnotationModule = new Class({
Implements:[ Events, Options ],
options:{},
initialize:function(t, e) {
this.setOptions(e), this.root_el = t, this.points = _.map(this.root_el.getElements(".point"), function(t) {
var e = new Point(t);
return e.addEvents({
mouseover:this.activateEverythingById.bind(this),
mouseout:this.deactivateEverythingById.bind(this)
}), e;
}.bind(this)), this.articles = _.map(this.root_el.getElements("article"), function(t) {
var e = new Article(t);
return e.addEvents({
mouseover:this.activateEverythingById.bind(this),
mouseout:this.deactivateEverythingById.bind(this)
}), e;
}.bind(this));
},
activateEverythingById:function(t) {
this.activateArticleById(t), this.activatePointById(t);
},
deactivateEverythingById:function(t) {
this.deactivateArticleById(t), this.deactivatePointById(t);
},
activateArticleById:function(t) {
_.each(this.articles, function(e) {
var i = t === e.id ? "makeActive" :"makeInactive";
e[i]();
});
},
deactivateArticleById:function() {
_.each(this.articles, function(t) {
t.removeActiveInactive();
});
},
activatePointById:function(t) {
_.each(this.points, function(e) {
var i = t === e.id ? "makeActive" :"makeInactive";
e[i]();
});
},
deactivatePointById:function() {
_.each(this.points, function(t) {
t.removeActiveInactive();
});
}
}), Harrys = Harrys || {};

window.addEvent("domready", function() {
var t = document.getElement(".product-page-hero-container"), e = new HeroSection(t), i = function() {
var e = t.getElement(".hero-wrap");
if (window.getWidth() < Harrys.MOBILE_BREAKPOINT) {
var i = t.getElement(".large-image").getWidth();
e.setStyle("height", i);
} else e.setStyle("height", "");
};
i(), window.addEvent("resize", i);
var n, s = $$(".product-description-container"), o = document.getElement(".info-wrap");
if (o && (n = new ProductForm(o), n.addEvents({
change:function(t) {
e && e.changeHeroByCartItem(t), _.each(s, function(e) {
e.get("data-id").toInt() === t.product.id ? e.setStyle("display", "block") :e.setStyle("display", "none");
});
}
}), n.active_mod_section.setIdByURL(), n.displayColorName()), _.each($$("body .video"), function(t) {
new Video(t);
}), _.each($$(".slideshow.product-gallery"), function(t) {
new Gallery(t, {
autoplay:!1
});
}), !Browser.Platform.ios && !Browser.Platform.android && !Harrys.IS_MOBILE) {
skrollr.init({
forceHeight:!1
});
}
var r = new URI().get("query").parseQueryString(), a = !r["wraith-no-animate"];
_.each($$("video.cover"), function(t) {
a || t.removeAttribute("autoplay"), new BgCoverVideo(t, {
yOffset:150
});
});
var l = $("carousel");
if (l) {
Harrys.slideShow = new SlideShow(l, {
transition:"pushLeft",
autoplay:!1,
delay:5e3,
selector:"> li"
});
var c = l.getElement(".arrow.left"), h = l.getElement(".arrow.right");
c.addEvent("click", function() {
Harrys.slideShow.show("previous", {
transition:"pushRight"
});
}), h.addEvent("click", function() {
Harrys.slideShow.show("next", {
transition:"pushLeft"
});
}), Hammer(l, {
drag:!1,
swipeVelocityX:.1
}).on("swipe", function(t) {
if (_.include([ "left", "right" ], t.gesture.direction)) {
var e, i;
"left" == t.gesture.direction ? (e = "pushLeft", i = "next") :"right" == t.gesture.direction && (e = "pushRight", 
i = "previous"), Harrys.slideShow.show(i, {
transition:e
});
}
});
}
var d = {
overview:document.getElement(".page.overview"),
shipping:document.getElement(".page.shipping"),
faq:document.getElement(".page.faq")
}, u = document.getElements(".tabs .tab");
u && _.each(u, function(t) {
t.addEvent("click", function() {
var e = t.get("data-page");
_.each(d, function(t) {
t && t.hide();
}), d[e] && (d[e].show(), new Fx.Scroll(window, {
offset:{
x:0,
y:-50
}
}).toElement(d[e])), _.each(u, function(t) {
t.removeClass("active");
}), t.addClass("active");
});
});
var p = document.getElements(".product.form .extra-info .link");
if (p && _.each(p, function(t) {
t.addEvent("click", function() {
var t;
u && (t = _.find(u, function(t) {
return "shipping" === t.get("data-page");
}), _.each(u, function(t) {
t.removeClass("active");
}), t && t.addClass("active")), d.shipping && (_.each(d, function(t) {
t && t.hide();
}), d.shipping.show(), new Fx.Scroll(window).toElement(d.shipping));
});
}), d.faq) {
var f = d.faq.getElements("article");
_.each(f, function(t) {
var e = t.getElement("h3"), i = t.getElement(".open-close");
e.addEvent("click", function() {
t.toggleClass("open");
}), i.addEvent("click", function() {
t.toggleClass("open");
});
});
}
_.each($$(".module.annotation"), function(t) {
new AnnotationModule(t);
});
});